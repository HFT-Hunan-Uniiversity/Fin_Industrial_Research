# 智能体输出功能更新说明

## 更新日期
2023年12月

## 新增功能

### 1. 智能体输出查看功能
添加了查看每个智能体输出内容和数据源信息的功能，帮助用户了解：
- 每个智能体使用的数据源和数据文件
- 每个智能体生成的输出内容
- 各智能体的主要输出字段

### 2. 数据文件夹结构优化
优化了数据文件夹结构，分为三个主要类别：
- 宏观数据：包含GDP、CPI、PPI等宏观经济指标数据
- 财务数据：包含汽车行业上市公司财务数据
- 市场数据：包含新能源汽车产销数据、充电设施数据等

### 3. 智能体代码重构
重构了各智能体代码，使其使用逻辑文件名而非硬编码路径，提高了系统的灵活性和可维护性。

## 使用方法

### 查看智能体输出内容

#### 方法一：通过命令行参数
```bash
python main.py --show-agent-outputs
```

#### 方法二：使用测试脚本
```bash
python test_agent_outputs.py
```

### 输出示例
```
================================================================================
智能体输出内容和数据源信息
================================================================================

【MacroAgent】
数据源: 宏观数据文件夹
数据文件: GDP数据（2000-2023年）.csv, CPI数据（2000-2023年）.csv, PPI数据（2000-2023年）.csv

主要输出字段:
  - macro_summary
  - macro_corr_matrix
  - key_insights
  - recommendations
...
```

## 技术改进

1. **数据映射系统**：通过data_mapping.yaml配置文件管理逻辑文件名到实际文件名的映射
2. **模块化设计**：将各智能体分离为独立模块，提高代码可维护性
3. **错误处理**：增强了JSON解析错误处理，确保系统稳定性
4. **测试脚本**：添加了多个测试脚本，方便验证系统功能

## 注意事项

1. 确保数据文件已正确放置在对应的文件夹中
2. 如果数据文件不存在，系统会显示警告信息
3. 输出内容可能会根据实际数据和分析结果有所不同
4. 使用 `--show-agent-outputs` 参数会增加输出内容的长度，建议在需要详细了解时使用

## 文档

详细使用说明请参考：[智能体输出功能说明.md](智能体输出功能说明.md)